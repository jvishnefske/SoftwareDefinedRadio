(kicad_sch
  (version 20231120)
  (generator "eeschema")
  (generator_version "8.0")
  (uuid "mcu-stm32g4-uuid-001")
  (paper "A3")
  (title_block
    (title "MCU - STM32G474")
    (date "2024-12-24")
    (rev "2.0")
    (comment 1 "ARM Cortex-M4F (UCPD unused - TPS25750D handles PD)")
    (comment 2 "JLCPCB Part: C481410")
  )

  (lib_symbols
    (symbol "STM32G474RET6:STM32G474RET6" (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 0 1.27 0) (effects (font (size 1.27 1.27))))
      (property "Value" "STM32G474RET6" (at 0 -2.54 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "STM32G474RET6_0_1"
        (rectangle (start -21.59 41.91) (end 21.59 -41.91)
          (stroke (width 0) (type default)) (fill (type background)))
        (circle (center -20.32 40.64) (radius 0.381)
          (stroke (width 0) (type default)) (fill (type background)))
        (pin unspecified line (at -24.13 39.37 0) (length 2.54) (name "VBAT" (effects (font (size 1 1)))) (number "1" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 36.83 0) (length 2.54) (name "PC13" (effects (font (size 1 1)))) (number "2" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 34.29 0) (length 2.54) (name "PC14-OSC32_IN" (effects (font (size 1 1)))) (number "3" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 31.75 0) (length 2.54) (name "PC15-OSC32_OUT" (effects (font (size 1 1)))) (number "4" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 29.21 0) (length 2.54) (name "PF0-OSC_IN" (effects (font (size 1 1)))) (number "5" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 26.67 0) (length 2.54) (name "PF1-OSC_OUT" (effects (font (size 1 1)))) (number "6" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 24.13 0) (length 2.54) (name "PG10-NRST" (effects (font (size 1 1)))) (number "7" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 21.59 0) (length 2.54) (name "PC0" (effects (font (size 1 1)))) (number "8" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 19.05 0) (length 2.54) (name "PC1" (effects (font (size 1 1)))) (number "9" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 16.51 0) (length 2.54) (name "PC2" (effects (font (size 1 1)))) (number "10" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 13.97 0) (length 2.54) (name "PC3" (effects (font (size 1 1)))) (number "11" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 11.43 0) (length 2.54) (name "PA0" (effects (font (size 1 1)))) (number "12" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 8.89 0) (length 2.54) (name "PA1" (effects (font (size 1 1)))) (number "13" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 6.35 0) (length 2.54) (name "PA2" (effects (font (size 1 1)))) (number "14" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 3.81 0) (length 2.54) (name "VSS" (effects (font (size 1 1)))) (number "15" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 1.27 0) (length 2.54) (name "VDD" (effects (font (size 1 1)))) (number "16" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -1.27 0) (length 2.54) (name "PA3" (effects (font (size 1 1)))) (number "17" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -3.81 0) (length 2.54) (name "PA4" (effects (font (size 1 1)))) (number "18" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -6.35 0) (length 2.54) (name "PA5" (effects (font (size 1 1)))) (number "19" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -8.89 0) (length 2.54) (name "PA6" (effects (font (size 1 1)))) (number "20" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -11.43 0) (length 2.54) (name "PA7" (effects (font (size 1 1)))) (number "21" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -13.97 0) (length 2.54) (name "PC4" (effects (font (size 1 1)))) (number "22" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -16.51 0) (length 2.54) (name "PC5" (effects (font (size 1 1)))) (number "23" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -19.05 0) (length 2.54) (name "PB0" (effects (font (size 1 1)))) (number "24" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -21.59 0) (length 2.54) (name "PB1" (effects (font (size 1 1)))) (number "25" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -24.13 0) (length 2.54) (name "PB2" (effects (font (size 1 1)))) (number "26" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -26.67 0) (length 2.54) (name "VSSA" (effects (font (size 1 1)))) (number "27" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -29.21 0) (length 2.54) (name "VREF+" (effects (font (size 1 1)))) (number "28" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -31.75 0) (length 2.54) (name "VDDA" (effects (font (size 1 1)))) (number "29" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -34.29 0) (length 2.54) (name "PB10" (effects (font (size 1 1)))) (number "30" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -36.83 0) (length 2.54) (name "VSS" (effects (font (size 1 1)))) (number "31" (effects (font (size 1 1)))))
        (pin unspecified line (at -24.13 -39.37 0) (length 2.54) (name "VDD" (effects (font (size 1 1)))) (number "32" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -39.37 180) (length 2.54) (name "PB11" (effects (font (size 1 1)))) (number "33" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -36.83 180) (length 2.54) (name "PB12" (effects (font (size 1 1)))) (number "34" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -34.29 180) (length 2.54) (name "PB13" (effects (font (size 1 1)))) (number "35" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -31.75 180) (length 2.54) (name "PB14" (effects (font (size 1 1)))) (number "36" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -29.21 180) (length 2.54) (name "PB15" (effects (font (size 1 1)))) (number "37" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -26.67 180) (length 2.54) (name "PC6" (effects (font (size 1 1)))) (number "38" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -24.13 180) (length 2.54) (name "PC7" (effects (font (size 1 1)))) (number "39" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -21.59 180) (length 2.54) (name "PC8" (effects (font (size 1 1)))) (number "40" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -19.05 180) (length 2.54) (name "PC9" (effects (font (size 1 1)))) (number "41" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -16.51 180) (length 2.54) (name "PA8" (effects (font (size 1 1)))) (number "42" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -13.97 180) (length 2.54) (name "PA9" (effects (font (size 1 1)))) (number "43" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -11.43 180) (length 2.54) (name "PA10" (effects (font (size 1 1)))) (number "44" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -8.89 180) (length 2.54) (name "PA11" (effects (font (size 1 1)))) (number "45" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -6.35 180) (length 2.54) (name "PA12" (effects (font (size 1 1)))) (number "46" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -3.81 180) (length 2.54) (name "VSS" (effects (font (size 1 1)))) (number "47" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 -1.27 180) (length 2.54) (name "VDD" (effects (font (size 1 1)))) (number "48" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 1.27 180) (length 2.54) (name "PA13" (effects (font (size 1 1)))) (number "49" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 3.81 180) (length 2.54) (name "PA14" (effects (font (size 1 1)))) (number "50" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 6.35 180) (length 2.54) (name "PA15" (effects (font (size 1 1)))) (number "51" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 8.89 180) (length 2.54) (name "PC10" (effects (font (size 1 1)))) (number "52" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 11.43 180) (length 2.54) (name "PC11" (effects (font (size 1 1)))) (number "53" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 13.97 180) (length 2.54) (name "PC12" (effects (font (size 1 1)))) (number "54" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 16.51 180) (length 2.54) (name "PD2" (effects (font (size 1 1)))) (number "55" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 19.05 180) (length 2.54) (name "PB3" (effects (font (size 1 1)))) (number "56" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 21.59 180) (length 2.54) (name "PB4" (effects (font (size 1 1)))) (number "57" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 24.13 180) (length 2.54) (name "PB5" (effects (font (size 1 1)))) (number "58" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 26.67 180) (length 2.54) (name "PB6" (effects (font (size 1 1)))) (number "59" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 29.21 180) (length 2.54) (name "PB7" (effects (font (size 1 1)))) (number "60" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 31.75 180) (length 2.54) (name "PB8-BOOT0" (effects (font (size 1 1)))) (number "61" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 34.29 180) (length 2.54) (name "PB9" (effects (font (size 1 1)))) (number "62" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 36.83 180) (length 2.54) (name "VSS" (effects (font (size 1 1)))) (number "63" (effects (font (size 1 1)))))
        (pin unspecified line (at 24.13 39.37 180) (length 2.54) (name "VDD" (effects (font (size 1 1)))) (number "64" (effects (font (size 1 1)))))
      )
    )
    (symbol "Device:Crystal" (pin_numbers (hide yes)) (pin_names (offset 1.016) (hide yes))
      (in_bom yes) (on_board yes)
      (property "Reference" "Y" (at 0 3.81 0) (effects (font (size 1.27 1.27))))
      (property "Value" "Crystal" (at 0 -3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "Crystal_0_1"
        (rectangle (start -0.762 2.286) (end 0.762 -2.286)
          (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy -1.778 1.524) (xy -1.778 -1.524))
          (stroke (width 0.508) (type default)) (fill (type none)))
        (polyline (pts (xy 1.778 1.524) (xy 1.778 -1.524))
          (stroke (width 0.508) (type default)) (fill (type none)))
      )
      (symbol "Crystal_1_1"
        (pin passive line (at -3.81 0 0) (length 2.032)
          (name "1" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
        (pin passive line (at 3.81 0 180) (length 2.032)
          (name "2" (effects (font (size 1.27 1.27)))) (number "2" (effects (font (size 1.27 1.27)))))
      )
    )
    (symbol "Device:C" (pin_numbers (hide yes)) (pin_names (offset 0.254))
      (in_bom yes) (on_board yes)
      (property "Reference" "C" (at 0.635 2.54 0) (effects (font (size 1.27 1.27)) (justify left)))
      (property "Value" "C" (at 0.635 -2.54 0) (effects (font (size 1.27 1.27)) (justify left)))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "C_0_1"
        (polyline (pts (xy -2.032 0.762) (xy 2.032 0.762)) (stroke (width 0.508) (type default)) (fill (type none)))
        (polyline (pts (xy -2.032 -0.762) (xy 2.032 -0.762)) (stroke (width 0.508) (type default)) (fill (type none)))
      )
      (symbol "C_1_1"
        (pin passive line (at 0 3.81 270) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
        (pin passive line (at 0 -3.81 90) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27)))) (number "2" (effects (font (size 1.27 1.27)))))
      )
    )
    (symbol "Device:R" (pin_numbers (hide yes)) (pin_names (offset 0))
      (in_bom yes) (on_board yes)
      (property "Reference" "R" (at 2.032 0 90) (effects (font (size 1.27 1.27))))
      (property "Value" "R" (at 0 0 90) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "R_0_1"
        (rectangle (start -1.016 2.54) (end 1.016 -2.54) (stroke (width 0.254) (type default)) (fill (type none)))
      )
      (symbol "R_1_1"
        (pin passive line (at 0 3.81 270) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
        (pin passive line (at 0 -3.81 90) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27)))) (number "2" (effects (font (size 1.27 1.27)))))
      )
    )
    (symbol "Switch:SW_Push" (pin_numbers (hide yes)) (pin_names (offset 1.016) (hide yes))
      (in_bom yes) (on_board yes)
      (property "Reference" "SW" (at 1.27 6.35 0) (effects (font (size 1.27 1.27)) (justify left)))
      (property "Value" "SW_Push" (at 0 -1.524 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "SW_Push_0_1"
        (circle (center -2.032 0) (radius 0.508)
          (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 1.27) (xy 0 3.048))
          (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy -2.54 1.524) (xy 2.54 1.524))
          (stroke (width 0) (type default)) (fill (type none)))
        (circle (center 2.032 0) (radius 0.508)
          (stroke (width 0) (type default)) (fill (type none)))
      )
      (symbol "SW_Push_1_1"
        (pin passive line (at -5.08 0 0) (length 2.54)
          (name "1" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
        (pin passive line (at 5.08 0 180) (length 2.54)
          (name "2" (effects (font (size 1.27 1.27)))) (number "2" (effects (font (size 1.27 1.27)))))
      )
    )
    (symbol "power:+3V3" (power) (pin_names (offset 0))
      (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (at 0 -3.81 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "+3V3" (at 0 3.556 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "+3V3_0_1"
        (polyline (pts (xy -0.762 1.27) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 2.54) (xy 0.762 1.27)) (stroke (width 0) (type default)) (fill (type none)))
      )
      (symbol "+3V3_1_1"
        (pin power_in line (at 0 0 90) (length 0) (hide yes)
          (name "+3V3" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
      )
    )
    (symbol "power:GND" (power) (pin_names (offset 0))
      (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (at 0 -6.35 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "GND" (at 0 -3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "GND_0_1"
        (polyline (pts (xy 0 0) (xy 0 -1.27) (xy 1.27 -1.27) (xy 0 -2.54) (xy -1.27 -1.27) (xy 0 -1.27))
          (stroke (width 0) (type default)) (fill (type none)))
      )
      (symbol "GND_1_1"
        (pin power_in line (at 0 0 270) (length 0) (hide yes)
          (name "GND" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
      )
    )
  )

  (text "STM32G474RET6 - ARM Cortex-M4F @ 170MHz"
    (exclude_from_sim no)
    (at 38.1 30.48 0)
    (effects (font (size 2.5 2.5) bold) (justify left))
    (uuid "text-mcu-title")
  )

  (text "STM32G474RET6 Features:\n• 512KB Flash, 128KB RAM\n• 170MHz Cortex-M4F with FPU/DSP\n• USB Full-Speed (UCPD unused)\n• 5x 12-bit ADC (4 MSPS)\n• 2x 12-bit DAC\n• HRTIM for precise PWM\n• 4x I2C, 4x SPI, 5x UART\n\nLCSC Part: C481410\nPackage: LQFP-64\n\nPin Assignments (Key):\n• PA0: PTT Input\n• PA4: Audio DAC Out\n• PA11/PA12: USB D-/D+\n• PB4: TPS25750D INT (optional)\n• PB5: GPIO Spare\n• PB6/PB7: I2C1 SCL/SDA\n• PC0/PC1: ADC (SWR FWD/REV)\n• PC2: ADC (Audio In)\n\nNote: USB-PD handled by TPS25750D\nMCU UCPD peripheral not used"
    (exclude_from_sim no)
    (at 38.1 45.72 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid "text-mcu-features")
  )

  (text "8MHz HSE Crystal"
    (exclude_from_sim no)
    (at 190.5 38.1 0)
    (effects (font (size 2 2) bold) (justify left))
    (uuid "text-crystal-title")
  )

  (symbol
    (lib_id "Device:Crystal")
    (at 203.2 55.88 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "y-hse")
    (property "Reference" "Y1"
      (at 203.2 48.26 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "8MHz"
      (at 203.2 50.8 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "Crystal:Crystal_HC49-4H_Vertical"
      (at 203.2 55.88 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "LCSC" "C32160"
      (at 203.2 55.88 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "JLC_Basic" "Yes"
      (at 203.2 55.88 0)
      (effects (font (size 1.27 1.27)) hide)
    )
  )

  (symbol
    (lib_id "Device:C")
    (at 193.04 68.58 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "c-hse-1")
    (property "Reference" "C10"
      (at 195.58 66.04 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "20pF"
      (at 195.58 68.58 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0402_1005Metric"
      (at 193.04 68.58 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "LCSC" "C1552"
      (at 193.04 68.58 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "JLC_Basic" "Yes"
      (at 193.04 68.58 0)
      (effects (font (size 1.27 1.27)) hide)
    )
  )

  (symbol
    (lib_id "Device:C")
    (at 213.36 68.58 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "c-hse-2")
    (property "Reference" "C11"
      (at 215.9 66.04 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "20pF"
      (at 215.9 68.58 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0402_1005Metric"
      (at 213.36 68.58 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "LCSC" "C1552"
      (at 213.36 68.58 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "JLC_Basic" "Yes"
      (at 213.36 68.58 0)
      (effects (font (size 1.27 1.27)) hide)
    )
  )


  (text "Power Decoupling"
    (exclude_from_sim no)
    (at 190.5 88.9 0)
    (effects (font (size 2 2) bold) (justify left))
    (uuid "text-decoupling-title")
  )

  (text "VDD Decoupling (x4):\n100nF 0402 on each VDD pin\nLCSC: C1525 (Basic)\n\nVDDA Decoupling:\n4.7uF + 100nF\nLCSC: C23733 + C1525\n\nVCAP:\n2x 1uF on VCAP1/VCAP2\nLCSC: C52923"
    (exclude_from_sim no)
    (at 190.5 101.6 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid "text-decoupling-note")
  )

  (symbol
    (lib_id "Device:C")
    (at 241.3 104.14 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "c-vdd-1")
    (property "Reference" "C12"
      (at 243.84 101.6 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "100nF"
      (at 243.84 104.14 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0402_1005Metric"
      (at 241.3 104.14 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "LCSC" "C1525"
      (at 241.3 104.14 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "JLC_Basic" "Yes"
      (at 241.3 104.14 0)
      (effects (font (size 1.27 1.27)) hide)
    )
  )

  (symbol
    (lib_id "Device:C")
    (at 254 104.14 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "c-vdda")
    (property "Reference" "C13"
      (at 256.54 101.6 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "4.7uF"
      (at 256.54 104.14 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0402_1005Metric"
      (at 254 104.14 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "LCSC" "C23733"
      (at 254 104.14 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "JLC_Basic" "Yes"
      (at 254 104.14 0)
      (effects (font (size 1.27 1.27)) hide)
    )
  )


  (text "Reset Circuit"
    (exclude_from_sim no)
    (at 38.1 139.7 0)
    (effects (font (size 2 2) bold) (justify left))
    (uuid "text-reset-title")
  )

  (symbol
    (lib_id "Switch:SW_Push")
    (at 55.88 157.48 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "sw-reset")
    (property "Reference" "SW1"
      (at 55.88 149.86 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "RESET"
      (at 55.88 152.4 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "Button_Switch_SMD:SW_SPST_TL3342"
      (at 55.88 157.48 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "LCSC" "C318884"
      (at 55.88 157.48 0)
      (effects (font (size 1.27 1.27)) hide)
    )
  )

  (symbol
    (lib_id "Device:R")
    (at 76.2 149.86 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "r-reset")
    (property "Reference" "R10"
      (at 78.74 147.32 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "10k"
      (at 78.74 149.86 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_SMD:R_0402_1005Metric"
      (at 76.2 149.86 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "LCSC" "C25744"
      (at 76.2 149.86 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "JLC_Basic" "Yes"
      (at 76.2 149.86 0)
      (effects (font (size 1.27 1.27)) hide)
    )
  )

  (symbol
    (lib_id "Device:C")
    (at 88.9 157.48 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "c-reset")
    (property "Reference" "C14"
      (at 91.44 154.94 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "100nF"
      (at 91.44 157.48 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0402_1005Metric"
      (at 88.9 157.48 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "LCSC" "C1525"
      (at 88.9 157.48 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "JLC_Basic" "Yes"
      (at 88.9 157.48 0)
      (effects (font (size 1.27 1.27)) hide)
    )
  )


  (text "USB Full-Speed (Data Only)"
    (exclude_from_sim no)
    (at 127 139.7 0)
    (effects (font (size 2 2) bold) (justify left))
    (uuid "text-usb-title")
  )

  (text "USB Connections:\n• PA11: USB_DM\n• PA12: USB_DP\n\nFreed UCPD Pins (UCPD not used):\n• PB4: TPS25750D_INT (optional)\n• PB5: GPIO_SPARE (reserved)\n\nNote: USB Power Delivery is handled\nby the standalone TPS25750D controller.\nSTM32 UCPD peripheral unused.\n\nESD Protection:\nUSBLC6-2SC6 (C7519)\nBasic part, protects D+/D-"
    (exclude_from_sim no)
    (at 127 154.94 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid "text-usb-note")
  )


  (text "Analog Inputs"
    (exclude_from_sim no)
    (at 38.1 190.5 0)
    (effects (font (size 2 2) bold) (justify left))
    (uuid "text-analog-title")
  )

  (text "ADC Channels:\n• PC0 (ADC1_IN6): SWR Forward\n• PC1 (ADC1_IN7): SWR Reverse\n• PC2 (ADC1_IN8): Audio Input\n• PB0 (ADC1_IN15): Battery Voltage\n\nDAC Channels:\n• PA4 (DAC1_OUT1): Audio Output\n• PA5 (DAC1_OUT2): Spare/Reference\n\nOp-Amp (for Audio):\nLM358 or similar\nLCSC: C7950 (Basic)"
    (exclude_from_sim no)
    (at 38.1 205.74 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid "text-analog-note")
  )


  (text "GPIO Pin Assignments"
    (exclude_from_sim no)
    (at 190.5 139.7 0)
    (effects (font (size 2 2) bold) (justify left))
    (uuid "text-gpio-title")
  )

  (text "Port A:\n PA0  - PTT Input (EXTI)\n PA1  - Band Relay SET 0\n PA2  - Band Relay SET 1\n PA3  - Band Relay SET 2\n PA4  - DAC1_OUT1 (Audio Out)\n PA5  - DAC1_OUT2\n PA6  - Band Relay RESET 0\n PA7  - Band Relay RESET 1\n PA8  - MCO1 (Debug Clock Out)\n PA9  - USART1_TX\n PA10 - USART1_RX\n PA11 - USB_DM\n PA12 - USB_DP\n PA13 - SWDIO\n PA14 - SWCLK\n PA15 - JTAG_TDI\n\nPort B:\n PB0  - ADC (VBAT Sense)\n PB1  - TX Enable\n PB2  - BOOT0 (tie low)\n PB3  - JTAG_TDO/SWO\n PB4  - TPS25750D_INT (GPIO, optional)\n PB5  - GPIO_SPARE (reserved)\n PB6  - I2C1_SCL\n PB7  - I2C1_SDA\n PB8  - Band Relay RESET 2\n PB9  - Band Relay SET 3\n PB10 - Band Relay RESET 3\n PB11 - Band Relay SET 4\n PB12 - Band Relay RESET 4\n PB13 - SPI2_SCK\n PB14 - SPI2_MISO\n PB15 - SPI2_MOSI\n\nPort C:\n PC0  - ADC1_IN6 (SWR FWD)\n PC1  - ADC1_IN7 (SWR REV)\n PC2  - ADC1_IN8 (Audio In)\n PC3  - Encoder A\n PC4  - Encoder B\n PC5  - Encoder Push\n PC6  - HRTIM1_CH1 (PWM to PA)\n PC7  - HRTIM1_CH2\n PC8  - T/R Switch Control\n PC9  - LED Status\n PC10 - UART4_TX (CAT)\n PC11 - UART4_RX (CAT)\n PC12 - SPI3_MOSI (Flash)\n PC13 - RTC_OUT\n PC14 - OSC32_IN\n PC15 - OSC32_OUT\n\nPort D:\n PD2  - SPI3_MISO"
    (exclude_from_sim no)
    (at 190.5 152.4 0)
    (effects (font (size 1 1)) (justify left))
    (uuid "text-gpio-detail")
  )


  (text "I2C1 Bus Devices"
    (exclude_from_sim no)
    (at 330.2 30.48 0)
    (effects (font (size 2 2) bold) (justify left))
    (uuid "text-i2c-title")
  )

  (text "STM32 I2C1 @ 400kHz (Host Bus):\n• 0x60 - Si5351A (Clock Gen)\n• 0x21 - TPS25750D (USB-PD, I2CS port)\n• 0x6B - BQ25798 (Charger, monitoring)\n• 0x08 - BQ76920 (Battery AFE)\n• 0x3C - SSD1306 (OLED, optional)\n\nTPS25750D I2CM (Charger Control):\n• 0x6B - BQ25798 (autonomous config)\n\nNote: TPS25750D autonomously controls\nBQ25798 via its I2CM port. STM32 can\nmonitor charger status via shared bus.\n\nPull-ups: 2.2k on SCL/SDA\nLCSC: C25879 (Basic 0402)"
    (exclude_from_sim no)
    (at 330.2 45.72 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid "text-i2c-note")
  )

  (symbol
    (lib_id "Device:R")
    (at 355.6 88.9 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "r-i2c-scl")
    (property "Reference" "R20"
      (at 358.14 86.36 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "2.2k"
      (at 358.14 88.9 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_SMD:R_0402_1005Metric"
      (at 355.6 88.9 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "LCSC" "C25879"
      (at 355.6 88.9 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "JLC_Basic" "Yes"
      (at 355.6 88.9 0)
      (effects (font (size 1.27 1.27)) hide)
    )
  )

  (symbol
    (lib_id "Device:R")
    (at 368.3 88.9 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "r-i2c-sda")
    (property "Reference" "R21"
      (at 370.84 86.36 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "2.2k"
      (at 370.84 88.9 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_SMD:R_0402_1005Metric"
      (at 368.3 88.9 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "LCSC" "C25879"
      (at 368.3 88.9 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "JLC_Basic" "Yes"
      (at 368.3 88.9 0)
      (effects (font (size 1.27 1.27)) hide)
    )
  )


  (symbol
    (lib_id "STM32G474RET6:STM32G474RET6")
    (at 101.6 101.6 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "u1-stm32g474")
    (property "Reference" "U1"
      (at 101.6 38.1 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "STM32G474RETx"
      (at 101.6 40.64 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "Package_QFP:LQFP-64_10x10mm_P0.5mm"
      (at 101.6 101.6 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "LCSC" "C481410"
      (at 101.6 101.6 0)
      (effects (font (size 1.27 1.27)) hide)
    )
  )

  (symbol
    (lib_id "power:+3V3")
    (at 25.4 45.72 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom no)
    (on_board yes)
    (dnp no)
    (uuid "pwr-mcu-3v3")
    (property "Reference" "#PWR06"
      (at 25.4 49.53 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "+3V3"
      (at 25.4 41.91 0)
      (effects (font (size 1.27 1.27)))
    )
  )

  (wire
    (pts
      (xy 25.4 45.72)
      (xy 25.4 50.8)
    )
    (uuid "wire-mcu-3v3")
  )

  (wire
    (pts
      (xy 368.3 76.2)
      (xy 381 76.2)
    )
    (uuid "wire-mcu-scl")
  )

  (wire
    (pts
      (xy 368.3 88.9)
      (xy 381 88.9)
    )
    (uuid "wire-mcu-sda")
  )

  (hierarchical_label "+3V3"
    (shape input)
    (at 25.4 50.8 180)
    (effects (font (size 1.524 1.524)) (justify right))
    (uuid "hlabel-mcu-3v3")
  )

  (hierarchical_label "I2C1_SCL"
    (shape bidirectional)
    (at 381 76.2 0)
    (effects (font (size 1.524 1.524)) (justify left))
    (uuid "hlabel-mcu-scl")
  )

  (hierarchical_label "I2C1_SDA"
    (shape bidirectional)
    (at 381 88.9 0)
    (effects (font (size 1.524 1.524)) (justify left))
    (uuid "hlabel-mcu-sda")
  )

  (hierarchical_label "PWM_PA"
    (shape output)
    (at 381 101.6 0)
    (effects (font (size 1.524 1.524)) (justify left))
    (uuid "hlabel-mcu-pwm")
  )

  (hierarchical_label "BAND_SEL[0..4]"
    (shape output)
    (at 381 114.3 0)
    (effects (font (size 1.524 1.524)) (justify left))
    (uuid "hlabel-mcu-band")
  )

  (hierarchical_label "USB_DP"
    (shape bidirectional)
    (at 381 127 0)
    (effects (font (size 1.524 1.524)) (justify left))
    (uuid "hlabel-mcu-usb-dp")
  )

  (hierarchical_label "USB_DM"
    (shape bidirectional)
    (at 381 139.7 0)
    (effects (font (size 1.524 1.524)) (justify left))
    (uuid "hlabel-mcu-usb-dm")
  )

  (hierarchical_label "TPS_INT"
    (shape input)
    (at 381 152.4 0)
    (effects (font (size 1.524 1.524)) (justify left))
    (uuid "hlabel-tps-int")
  )

  (wire (pts (xy 139.7 99.06) (xy 300 99.06)) (uuid "wire-mcu-pwm-1"))
  (wire (pts (xy 300 99.06) (xy 300 101.6)) (uuid "wire-mcu-pwm-2"))
  (wire (pts (xy 300 101.6) (xy 381 101.6)) (uuid "wire-mcu-pwm-3"))

  (bus (pts (xy 139.7 114.3) (xy 381 114.3)) (uuid "bus-mcu-band"))

  (wire (pts (xy 139.7 91.44) (xy 320 91.44)) (uuid "wire-mcu-usb-dp-1"))
  (wire (pts (xy 320 91.44) (xy 320 127)) (uuid "wire-mcu-usb-dp-2"))
  (wire (pts (xy 320 127) (xy 381 127)) (uuid "wire-mcu-usb-dp-3"))

  (wire (pts (xy 139.7 93.98) (xy 315 93.98)) (uuid "wire-mcu-usb-dm-1"))
  (wire (pts (xy 315 93.98) (xy 315 139.7)) (uuid "wire-mcu-usb-dm-2"))
  (wire (pts (xy 315 139.7) (xy 381 139.7)) (uuid "wire-mcu-usb-dm-3"))

  (wire (pts (xy 63.5 109.22) (xy 50.8 109.22)) (uuid "wire-mcu-tps-int-1"))
  (wire (pts (xy 50.8 109.22) (xy 50.8 180)) (uuid "wire-mcu-tps-int-2"))
  (wire (pts (xy 50.8 180) (xy 350 180)) (uuid "wire-mcu-tps-int-3"))
  (wire (pts (xy 350 180) (xy 350 152.4)) (uuid "wire-mcu-tps-int-4"))
  (wire (pts (xy 350 152.4) (xy 381 152.4)) (uuid "wire-mcu-tps-int-5"))

  (text "MCU Pin Connections:\n• PA12 → USB_DP (via ESD)\n• PA11 → USB_DM (via ESD)\n• PC6  → PWM_PA (HRTIM)\n• PB4  → TPS_INT (GPIO input)\n• PA1-3, PA6-7, PB8-12 → BAND_SEL bus"
    (exclude_from_sim no)
    (at 280 180 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid "text-mcu-pin-notes")
  )

)
